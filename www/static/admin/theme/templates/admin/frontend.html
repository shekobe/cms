<!DOCTYPE html>
<!-- 
Template Name: Metronic - Responsive Admin Dashboard Template build with Twitter Bootstrap 3.3.4
Version: 3.9.0
Author: KeenThemes
Website: http://www.keenthemes.com/
Contact: support@keenthemes.com
Follow: www.twitter.com/keenthemes
Like: www.facebook.com/keenthemes
Purchase: http://themeforest.net/item/metronic-responsive-admin-dashboard-template/4021469?ref=keenthemes
License: You must have a valid license purchased only from themeforest(the above link) in order to legally use the theme for your project.
-->
<!--[if IE 8]> <html lang="en" class="ie8 no-js"> <![endif]-->
<!--[if IE 9]> <html lang="en" class="ie9 no-js"> <![endif]-->
<!--[if !IE]><!-->
<html lang="en">
	<!--<![endif]-->
	<!-- BEGIN HEAD -->
	<head>
		<meta charset="utf-8"/>
		<title>Metronic | UI Components - Knob Circle Dials</title>
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
		<meta http-equiv="Content-type" content="text/html; charset=utf-8">
		<meta content="" name="description"/>
		<meta content="" name="author"/>
		<!-- BEGIN GLOBAL MANDATORY STYLES -->
		<link href="../../assets/global/plugins/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>
		<link href="../../assets/global/plugins/simple-line-icons/simple-line-icons.min.css" rel="stylesheet" type="text/css"/>
		<link href="../../assets/global/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
		<link href="../../assets/global/plugins/uniform/css/uniform.default.css" rel="stylesheet" type="text/css"/>
		<link href="../../assets/global/plugins/bootstrap-switch/css/bootstrap-switch.min.css" rel="stylesheet" type="text/css"/>

		<!-- END GLOBAL MANDATORY STYLES -->
		<!-- BEGIN PAGE LEVEL STYLES -->
		<!--<link href="../../assets/global/plugins/bootstrap-modal/css/bootstrap-modal-bs3patch.css" rel="stylesheet" type="text/css"/>-->
		<!--<link href="../../assets/global/plugins/bootstrap-modal/css/bootstrap-modal.css" rel="stylesheet" type="text/css"/>-->
		<!-- END PAGE LEVEL STYLES -->
		<!-- BEGIN PAGE LEVEL STYLES -->
		<link href="../../assets/global/css/loaders.css.min.css" rel="stylesheet" type="text/css"/>
		<link href="../../assets/admin/pages/css/timeline-old.css" rel="stylesheet" type="text/css"/>
		<!-- END PAGE LEVEL STYLES -->
		<!-- BEGIN THEME STYLES -->
		<link href="../../assets/global/css/components.css" id="style_components" rel="stylesheet" type="text/css"/>
		<link href="../../assets/global/css/plugins.css" rel="stylesheet" type="text/css"/>
		<link href="../../assets/admin/layout/css/layout.css" rel="stylesheet" type="text/css"/>
		<link id="style_color" href="../../assets/admin/layout/css/themes/darkblue.css" rel="stylesheet" type="text/css"/>
		<link href="../../assets/admin/layout/css/custom.css" rel="stylesheet" type="text/css"/>
		<!-- END THEME STYLES -->
		<link rel="shortcut icon" href="favicon.ico"/>
		<style>
			.panel:hover{
				border: 1px solid #3598dc;
			}
		</style>
		<script src="../../assets/admin/layout/scripts/socket.io.js"></script>
	</head>
	<!-- END HEAD -->
	<!-- BEGIN BODY -->
	<!-- DOC: Apply "page-header-fixed-mobile" and "page-footer-fixed-mobile" class to body element to force fixed header or footer in mobile devices -->
	<!-- DOC: Apply "page-sidebar-closed" class to the body and "page-sidebar-menu-closed" class to the sidebar menu element to hide the sidebar by default -->
	<!-- DOC: Apply "page-sidebar-hide" class to the body to make the sidebar completely hidden on toggle -->
	<!-- DOC: Apply "page-sidebar-closed-hide-logo" class to the body element to make the logo hidden on sidebar toggle -->
	<!-- DOC: Apply "page-sidebar-hide" class to body element to completely hide the sidebar on sidebar toggle -->
	<!-- DOC: Apply "page-sidebar-fixed" class to have fixed sidebar -->
	<!-- DOC: Apply "page-footer-fixed" class to the body element to have fixed footer -->
	<!-- DOC: Apply "page-sidebar-reversed" class to put the sidebar on the right side -->
	<!-- DOC: Apply "page-full-width" class to the body element to have full width page without the sidebar menu -->
	<body class="page-header-fixed page-quick-sidebar-over-content " style="background-color: #fff;">


		<!-- BEGIN CONTAINER -->
		<div class="" >

			<!-- BEGIN CONTENT -->
			<div class="page-content-wrapper">
				<div class="">
					<!-- BEGIN SAMPLE PORTLET CONFIGURATION MODAL FORM-->
					<div class="modal fade" id="portlet-config" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
						<div class="modal-dialog">
							<div class="modal-content">
								<div class="modal-header">
									<button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
									<h4 class="modal-title">Modal title</h4>
								</div>
								<div class="modal-body" style="">
									Widget settings form goes here
								</div>
								<div class="modal-footer">
									<button type="button" class="btn blue">Save changes</button>
									<button type="button" class="btn default" data-dismiss="modal">Close</button>
								</div>
							</div>
							<!-- /.modal-content -->
						</div>
						<!-- /.modal-dialog -->
					</div>
					<!-- /.modal -->
					<!-- END SAMPLE PORTLET CONFIGURATION MODAL FORM-->
					<!-- BEGIN STYLE CUSTOMIZER -->

					<!-- BEGIN PAGE HEADER-->

					<!-- END PAGE HEADER-->
					<!-- BEGIN PAGE CONTENT-->
					<div class="row" style="color:#000;margin-top: 5px;height: 445px;overflow: hidden;">





						<div class="col-md-11 j_scrolllog portlet-body" style="margin-right:15px;padding-top:5px; overflow-y:scroll;height: 400px;">
							<ul style="" class="timeline j_setlog">


							</ul>
						</div>
						<div class="col-md-11" style="margin-bottom: 10px;">
							<a class="btn default green j_showlog" style="float: right;" href="javascript:;">
								更新showlog</a>
						</div>
					</div>
					<div class="row">
						<div class="col-md-12">
							<!-- BEGIN PORTLET-->
							<div class="portlet box">

								<div class="portlet-body">



									<div class="row">

										<div class="col-md-12">

											<div class="j_logresult" style="border: 1px solid #b03d7b;padding: 12px;">
												提示：点击上面圆圈选择要提交的文件
											</div>
											<p class="help-block">
												<input type="text" class="j_commitmsg" style="width: 400px;" placeholder="选填项  Commit Message"/>
											</p>

										</div>
										<div class="clearfix col-md-12" style="margin: 0px 0px 15px 0px;">
											<a class="btn default red j_submit" href="javascript:;">
												提交 </a>
											<!--<a class="btn default red j_submit" data-toggle="modal" href="#responsive">-->
											<!--提交 </a>-->
										</div>

										<div class="col-md-12">
											<div class="tab-content j_contentBox">


											</div>
										</div>
										<!-- responsive -->
										<div id="responsive" class="modal fade" tabindex="-1" data-width="760">
											<div class="modal-header">
												<button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
												<h4 class="modal-title">实时状态</h4>
											</div>
											<div class="modal-body" style="background-color: rgb(29, 29, 29);color: rgb(255, 255, 255);">
												<div class="row">

													<div class="col-md-12">
														<ul style="height: 500px;margin: 0;overflow-y: scroll;padding: 10px 20px 10px 20px;" class="messages">
															<li class="message">
																<span class="messageBody">sdfsdfds</span>
															</li>
															<li class="message">
																<span class="messageBody">sdfsdfds</span>
															</li>
															<li class="message">
																<span class="messageBody">sdfsdfds</span>
															</li>
															<li class="message">
																<span class="messageBody">sdfsdfds</span>
															</li>
															<li class="message">
																<span class="messageBody">sdfsdfds</span>
															</li>
															<li class="message">
																<span class="messageBody">sdfsdfds</span>
															</li><li class="message">
															<span class="messageBody">sdfsdfds</span>
														</li><li class="message">
															<span class="messageBody">sdfsdfds</span>
														</li><li class="message">
															<span class="messageBody">sdfsdfds</span>
														</li>
															<li class="message">
																<span class="messageBody">sdfsdfds</span>
															</li>



															<li class="message">
																<span class="messageBody">sdfsdfds</span>
															</li>
														</ul>

													</div>
												</div>
											</div>
											<div class="modal-footer">
												<button type="button" data-dismiss="modal" class="btn btn-default">Close</button>
												<!--<button type="button" class="btn blue">Save changes</button>-->
											</div>
										</div>
									</div>
								</div>
							</div>
							<!-- END PORTLET-->
						</div>
					</div>
					<!-- END PAGE CONTENT-->
				</div>
				<!-- BEGIN CONTENT -->
			</div>
			<!-- END CONTENT -->

		</div>

		<!-- END CONTAINER -->
		<script id="showlist" type="text/html">
			{{each data as value i}}
			<li class="timeline-green">
				<div class="timeline-time">
								<span class="date">
									 {{value.date | dateFormat}}
							</span>
								<span class="time">
								{{value.date | dateFormat2}} </span>
				</div>
				<div class="timeline-icon">
					<a style="margin-bottom: 3px;display: none;" class="btn btn-circle btn-icon-only green" href="javascript:;">

					</a>
				</div>
				<div class="timeline-body" style="padding: 0;">
					<div id="tab_{{i}}" class="tab-pane active">
						<div id="accordion{{i}}" class="panel-group">

							<div class="panel panel-default"  >


								<div class="panel-heading" data-toggle="collapse" data-parent="#accordion{{i}}" href="#accordion1_{{i}}">
									<h4 class="panel-title" style="margin-bottom:5px;">
										<a style="color:#ff0000" class="accordion-toggle collapsed" aria-expanded="false">
											{{value.author}}

										</a>
										<span style="float: right">{{value.revision}}</span>
									</h4>
									<div>
										<a style="color:#000" class="accordion-toggle collapsed j_msg" aria-expanded="false">
											{{value.message}}

										</a>
									</div>

								</div>
								<div id="accordion1_{{i}}" class="panel-collapse collapse" aria-expanded="false" style="height: 0px;">
									<div style="color:#000" class="panel-body j_pathout">
										{{each value.changes as abc j}}
										<div class="j_path" data-value="{{abc.path}}">
											{{if abc.status == 'A'}}

											<span class="badge badge-success j_fcount">{{abc.status}}</span>
											{{/if}}
											{{if abc.status == 'M'}}

											<span class="badge badge-info j_fcount">{{abc.status}}</span>
											{{/if}}
											{{if abc.status == 'D'}}

											<span class="badge badge-danger j_fcount">{{abc.status}}</span>
											{{/if}}
											<span class="path">{{abc.path}}</span>
										</div>
										{{/each}}



									</div>
								</div>
							</div>

						</div>
					</div>
				</div>
			</li>
			{{/each}}
		</script>
		<script id="userlist" type="text/html">

			{{each data as value i}}
			<div id="tabb_{{i}}" class="tab-pane active">
				<div id="accordionb{{i}}" class="panel-group">
					{{if value.status == 'close'}}
					<div class="panel panel-success">
						{{else if value.status == 'close27'}}
						<div class="panel panel-danger">
							{{else if value.status == 'open'}}
							<div class="panel panel-default">
								{{/if}}

								<div class="panel-heading" data-toggle="collapse" data-parent="#accordionb{{i}}" href="#accordion1b_{{i}}" aria-expanded="false">
									<h4 style="width: 800px;color: #000;" class="panel-title">
										{{i+1}}、{{value.msg}}
										<div style="float: right">
											{{if value.status == 'open'}}
											<a class="j_del btn default red" data-id="{{value._id}}">删除</a>
											{{/if}}
											<a class="j_download btn default blue" id="{{value._id}}" data-id="{{value._id}}" data-con="{{value.con}}">
												<!--<img height="15" src="/static/theme/assets/admin/layout/img/loadingbg.gif">-->
												下载压缩包
											</a>
										</div>
									</h4>

									<div>
								<span style="color:#26a69a">
									{{value.data}}，
									{{if value.operator}}
									{{value.operator}}
									{{/if}}

								   {{if value.status == 'open'}}
									未处理
									{{else if value.status == 'close'}}
									已发布到生产环境
									{{else if value.status == 'close27'}}
									已发布到测试环境
									{{/if}}

								</span>
									</div>
								</div>
								<div id="accordion1b_{{i}}" class="panel-collapse collapse" aria-expanded="false" style="height: 0px;">
									<div class="panel-body" style="overflow: hidden;">

										{{value.con | dateFormatCon}}
									</div>
								</div>
							</div>

						</div>
					</div>
					{{/each}}

		</script>
		<!-- BEGIN JAVASCRIPTS(Load javascripts at bottom, this will reduce page load time) -->
		<!-- BEGIN CORE PLUGINS -->
		<!--[if lt IE 9]>
		<script src="../../assets/global/plugins/respond.min.js"></script>
		<script src="../../assets/global/plugins/excanvas.min.js"></script>
		<![endif]-->
		<script src="../../assets/global/plugins/jquery.min.js" type="text/javascript"></script>
		<script src="../../assets/global/plugins/jquery-migrate.min.js" type="text/javascript"></script>
		<!-- IMPORTANT! Load jquery-ui.min.js before bootstrap.min.js to fix bootstrap tooltip conflict with jquery ui tooltip -->
		<script src="../../assets/global/plugins/jquery-ui/jquery-ui.min.js" type="text/javascript"></script>
		<script src="../../assets/global/plugins/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
		<script src="../../assets/global/plugins/bootstrap-hover-dropdown/bootstrap-hover-dropdown.min.js" type="text/javascript"></script>
		<script src="../../assets/global/plugins/jquery-slimscroll/jquery.slimscroll.min.js" type="text/javascript"></script>
		<script src="../../assets/global/plugins/jquery.blockui.min.js" type="text/javascript"></script>
		<script src="../../assets/global/plugins/jquery.cokie.min.js" type="text/javascript"></script>
		<script src="../../assets/global/plugins/uniform/jquery.uniform.min.js" type="text/javascript"></script>
		<script src="../../assets/global/plugins/bootstrap-switch/js/bootstrap-switch.min.js" type="text/javascript"></script>
		<!-- END CORE PLUGINS -->
		<!-- BEGIN PAGE LEVEL PLUGINS -->
		<!--<script src="../../assets/global/plugins/bootstrap-modal/js/bootstrap-modalmanager.js" type="text/javascript"></script>-->
		<!--<script src="../../assets/global/plugins/bootstrap-modal/js/bootstrap-modal.js" type="text/javascript"></script>-->
		<!-- END PAGE LEVEL PLUGINS -->
		<script src="../../assets/global/plugins/bootbox/bootbox.min.js" type="text/javascript"></script>
		<!-- BEGIN PAGE LEVEL SCRIPTS -->
		<script src="../../assets/global/scripts/metronic.js" type="text/javascript"></script>
		<script src="../../assets/admin/layout/scripts/layout.js" type="text/javascript"></script>
		<script src="../../assets/admin/layout/scripts/quick-sidebar.js" type="text/javascript"></script>
		<script src="../../assets/admin/layout/scripts/demo.js" type="text/javascript"></script>
		<script src="../../assets/admin/pages/scripts/ui-extended-modals.js"></script>
		<script src="../../assets/admin/layout/scripts/template.js"></script>
		<style>
			.timeline-icon:hover{
				cursor: pointer;
			}
		</style>
		<!-- END PAGE LEVEL SCRIPTS -->
		<script>
			jQuery(document).ready(function() {
//				// initiate layout and plugins
//				Metronic.init(); // init metronic core components
//				Layout.init(); // init current layout
//				QuickSidebar.init(); // init quick sidebar
//				Demo.init(); // init demo features  // set current page
//				ComponentsKnobDials.init();
				template.helper('dateFormat', function (dateTime,from) {

					var oldStr = new Date(dateTime);
					var arr = [oldStr.getFullYear(),oldStr.getMonth()+1,oldStr.getDate()];
					arr[1] = parseInt(arr[1]) < 10 ? '0'+arr[1] : arr[1];
					var weekArray = new Array("星期日", "星期一", "星期二", "星期三", "星期四", "星期五", "星期六");
					var week_i = new Date(arr[0]+'/'+arr[1]+'/'+arr[2]).getDay();
					var week = weekArray[week_i];
					return arr[0]+'/'+arr[1]+'/'+arr[2]+' '+week;

				});
				template.helper('dateFormat2', function (dateTime,from) {


					var oldStr = new Date(dateTime);

					return oldStr.getHours()+':'+oldStr.getMinutes();


				});
				template.helper('dateFormatCon', function (str,from) {


					var str = str.substring(1,str.length-1);
					var arr = str.split(',');
					var str2 = '';
					for(var i=0;i<arr.length;i++){
						str2 +='<div class="path">'+arr[i]+'</div>';
					}
					return str2;


				});
				//UIExtendedModals.init();
				window.console && console.log('svnul',window.parent.$('body').attr('data-svnurl'));
				$('.j_svnul').val(window.parent.$('body').attr('data-svnurl'));
				// Initialize varibles
				var $window = $(window);
				var $messages = $('.messages'); // Messages area
				var socket = io();
				function checklogin(){
					if($.cookie('user')){
						return true;
					}else{
						return false;
					}

				}
				if(!checklogin()){
					window.parent.location.reload();
					return;
				}
				initData();
				function initData(){//getuserbyname
					$.ajax({
						url:'/admin/user/getuserbyname2',
						type:'POST',
						cache: false,
						complete:function(xhr, textStatus){
							if(textStatus == 'success' && xhr.status == '200'){
								var response = eval("("+xhr.responseText+")");
								window.console && console.log('init get data',response);
								if(response.errno == 0){//返回数据正常
									window.console && console.log('do updateall');
									socket.emit('updateall', {
										user: $.cookie('user')
									});
									var str = template('userlist',response);
									$('.j_contentBox').html(str);
									$('.j_textarea').val('');

								}else{

								}

							}else{
								window.console && console.log('error',xhr, textStatus);
							}
						}
					});

				}
				//删除数据
				$(document).on('click','.j_del',function (e) {
					e.stopPropagation();
					if(!checklogin()){
						window.parent.location.reload();
						return;
					}
					var id = $(this).attr('data-id');
					window.console && console.log('del',id);
					$.ajax({
						url:'/admin/user/deldata',
						type:'POST',
						data:{
							id:id
						},
						cache: false,
						complete:function(xhr, textStatus){
							if(textStatus == 'success' && xhr.status == '200'){
								var response = eval("("+xhr.responseText+")");
								window.console && console.log('res',response);
								if(response.errno == 0){//返回数据正常
									initData();

								}else{

								}

							}else{
								window.console && console.log('error',xhr, textStatus);
							}
						}
					});

				});

				//下载数据j_download    /admin/user/download
				var cflag = true;
				$(document).on('click','.j_download',function (e) {
					if(!checklogin()){
						window.parent.location.reload();
						return;
					}
					if(!cflag){
						return;
					}
					cflag = false;
					e.stopPropagation();
					var t = $(this);
					var str =$.trim(t.attr('data-con'));


					window.console && console.log('str',str);
					//return;
					t.html('<div class="loader" style="height: 20px;overflow: hidden;width: 70px;"><div class="loader-inner pacman"><div></div><div></div><div></div><div></div><div></div></div></div>');
					//t.html('<img height="15" width="56" src="/static/theme/assets/admin/layout/img/loadingbg.gif">');
					setTimeout(function(){
						socket.emit('downloadlist',{
							id:t.attr('data-id'),
							dom:t,
							str: t.attr('data-con')
						});

					},300);

				});
				//提交数据
				$('.j_submit').on('click',function () {
//					var str =$.trim($('.j_textarea').val());
//					if(!str){
//						return;
//					}
					if(!checklogin()){
						window.parent.location.reload();
						return;
					}
					window.console && console.log('123456');
					var str = '';
					var re=/[\u0391-\uFFE5]+/g;
					$('.j_logresult').find('span.path').each(function(){
						var str2 = $(this).html();
						//过滤带有中文的文件
						if(!re.test(str2)){
							str +=str2+',';
						}

					});

					//str = str.replace(/|/g,",");
					str = str.replace(/\\ec-b2c\\3\.development\\trunk\\front-web\\WebContent/g,"").replace(/\\/g,'/');
					str = str.substring(0,str.length-1);
					window.console && console.log('str',str);
					if(!str){
						return;
					}
					str = "{" +str+ "}";

					$.ajax({
						url:'/admin/user/addlist2',
						type:'POST',
						data:{
							str:str,
							msg:$('.j_commitmsg').val(),
							username:$.cookie('user') || $('.j_username').html()
						},
						cache: false,
						complete:function(xhr, textStatus){
							if(textStatus == 'success' && xhr.status == '200'){
								var response = eval("("+xhr.responseText+")");
								window.console && console.log('res',response);
								if(response.errno == 0){//返回数据正常
									bootbox.alert('提交成功');
									initData();
									initshowlog();
								}else{
									bootbox.alert('提交成功');
								}

							}else{
								window.console && console.log('error',xhr, textStatus);
							}
						}
					});

				});
				//点击圆圈添加svn列表
				$('.j_scrolllog').on('click','.timeline-icon',function(){
					var t = $(this);
					if(t.find('a').is(':visible')){
						t.find('a').hide();
						t.closest('li.timeline-green').removeClass('selected');
					}else{
						t.find('a').show();
						t.closest('li.timeline-green').addClass('selected');
					}
					setpath();
				});
				//setpath
				function setpath(){
					var str = '';
					$('.j_setlog').find('li.selected').each(function(i){
						window.console && console.log('i',i);
						str +=$(this).find('.j_pathout').html();
					});
					$('.j_commitmsg').val($.trim($('.j_setlog').find('li.selected').eq(0).find('.j_msg').html()));
					$('.j_logresult').html(str);
				}
				//delapth
				//showlog
				initshowlog();
				function initshowlog(){
					window.console && console.log('initshowlog');
					$.ajax({
						url:'/admin/user/showlog',
						type:'POST',
						data:{
							page:60

						},
						cache: false,
						complete:function(xhr, textStatus){
							window.console && console.log('get showlog 0ut',xhr, textStatus);
							if(textStatus == 'success' && xhr.status == '200'){
								var response = eval("("+xhr.responseText+")");
								window.console && console.log('get showlog',response);
								if(response.errno == 0){//返回数据正常

									var str = template('showlist',response);
									$('.j_setlog').html(str);
									$('.j_scrolllog')[0].scrollTop = 0;
									$('.j_logresult').html('提示：点击上面圆圈选择要提交的文件');
//									$('body,html').animate({scrollTop:0},1000);
								}else{

								}

							}else{
								window.console && console.log('get showlog error',xhr, textStatus);
							}
						}
					});
					window.console && console.log('endinitshowlog');
				}
				$('.j_showlog').on('click',function () {
					initshowlog();

				});
				//保存svn路径
				$('.j_savesvn').on('click',function () {
					var str =$.trim($('.j_svnul').val());
					if(!str){
						return;
					}

					window.console && console.log('str',str);
					$.ajax({
						url:'/admin/user/updatasvnurl',
						type:'POST',
						data:{
							str:str,
							username:$.cookie('user') || $('.j_username').html()
						},
						cache: false,
						complete:function(xhr, textStatus){
							if(textStatus == 'success' && xhr.status == '200'){
								var response = eval("("+xhr.responseText+")");
								window.console && console.log('res',response);
								if(response.errno == 0){//返回数据正常
									initData();

								}else{

								}

							}else{
								window.console && console.log('error',xhr, textStatus);
							}
						}
					});

				});

//				$('.j_submit').on('click',function () {
//					$messages.empty();
//					var t = $(this);
//					var str =$.trim($('.j_textarea').val());
//
//					str = str.replace(/\n/g,",");
//					str = str.replace(/\/branches\/founder\/WebContent/g,"");
//					str = "{" +str+ "}";
//					window.console && console.log('str',str);
//					//return;
//
//
//					setTimeout(function(){
//						socket.emit('addlist', 'test');
//						window.console && console.log('123456');
//					},300);
//
//				});
//				socket.on('abc', function (data) {
//					window.console && console.log('get socket message',data.message);
//					setCon(data.message)
//				});
				socket.on('downloadpath', function (data) {

					window.console && console.log('downloadpath',data.path);
					var obj = $('#'+data.id);
					obj.html('下载压缩包');
					//obj.hide();
					//obj.siblings('a.j_dd').addClass('btn blue').attr('href','/admin/user/download?name='+data.path).html('点击下载');
					cflag = true;
					location.href = '/admin/user/download?name='+data.path;
					//obj.siblings('a.j_dd').trigger('click');

				});


				function setCon(data) {
					var $messageBodyDiv = $('<span class="messageBody">')
							.html(data);
					var $messageDiv = $('<li class="message"/>')
							.append($messageBodyDiv);
					var $el = $($messageDiv);
					$messages.append($el);
					$messages[0].scrollTop = $messages[0].scrollHeight;
				}

			});
		</script>
		<!-- END JAVASCRIPTS -->
	</body>
	<!-- END BODY -->
</html>  